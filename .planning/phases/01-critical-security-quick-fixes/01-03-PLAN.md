---
phase: 01-critical-security-quick-fixes
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - components/SignIn.tsx
  - components/SignUp.tsx
autonomous: true

must_haves:
  truths:
    - "Sign in failures display user-friendly error messages below the form"
    - "Sign up failures display user-friendly error messages below the form"
    - "Auth errors no longer silently log to console without user feedback"
  artifacts:
    - path: "components/SignIn.tsx"
      provides: "Sign in component with error state and display"
      contains: "const [error, setError] = useState"
    - path: "components/SignUp.tsx"
      provides: "Sign up component with error state and display"
      contains: "const [error, setError] = useState"
  key_links:
    - from: "components/SignIn.tsx"
      to: "Firebase Auth"
      via: "catch block with setError"
      pattern: "\\.catch.*setError"
    - from: "components/SignUp.tsx"
      to: "Firebase Auth"
      via: "catch block with setError"
      pattern: "\\.catch.*setError"
---

<objective>
Surface authentication errors to users with generic, user-friendly messages displayed inline below auth forms, replacing silent console.log error handling.

Purpose: Provide feedback when sign in/sign up fails, improving user experience and debugging
Output: Error state and inline error display in both SignIn and SignUp components
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-critical-security-quick-fixes/01-CONTEXT.md
@components/SignIn.tsx
@components/SignUp.tsx
</context>

<tasks>

<task type="auto">
  <name>Add error state and display to SignIn component</name>
  <files>components/SignIn.tsx</files>
  <action>
Add error state management at component top level:
```typescript
const [error, setError] = useState<string>('');
```

Update the catch block (currently lines 18-20) from:
```typescript
.catch((error) => {
  console.log(error);
});
```

To:
```typescript
.catch((error) => {
  console.error("Sign in error:", error); // Keep console logging for debugging
  setError("Sign in failed. Please check your credentials and try again.");
});
```

Add inline error display below the form (after the submit button, before closing div):
```tsx
{error && (
  <p className="mt-2 text-sm text-red-600 text-center">
    {error}
  </p>
)}
```

Clear error state when user attempts new sign in (at start of signIn function):
```typescript
setError(''); // Clear previous error
```

Per user decision: Use generic error message that doesn't expose specifics like "wrong password" or "email already in use". Display inline below form, not as toast or banner.
  </action>
  <verify>
grep "const \[error, setError\]" components/SignIn.tsx confirms error state added
grep "setError.*Sign in failed" components/SignIn.tsx confirms error message set in catch
grep "text-red-600" components/SignIn.tsx confirms error display element exists
npm run build succeeds without TypeScript errors
  </verify>
  <done>SignIn component has error state, sets generic error message on auth failure, displays error inline below form, and clears error on retry</done>
</task>

<task type="auto">
  <name>Add error state and display to SignUp component</name>
  <files>components/SignUp.tsx</files>
  <action>
Add error state management at component top level:
```typescript
const [error, setError] = useState<string>('');
```

Update the catch block (currently lines 21-23) from:
```typescript
.catch((error) => {
  console.log(error);
});
```

To:
```typescript
.catch((error) => {
  console.error("Sign up error:", error); // Keep console logging for debugging
  setError("Sign up failed. Please check your information and try again.");
});
```

Add inline error display below the form (after the submit button, before closing div):
```tsx
{error && (
  <p className="mt-2 text-sm text-red-600 text-center">
    {error}
  </p>
)}
```

Clear error state when user attempts new sign up (at start of signUp function):
```typescript
setError(''); // Clear previous error
```

Note: SignUp.tsx has duplicate Firebase initialization at lines 25-26 per CONCERNS.md. Do NOT fix this in this task - Phase 3 handles Firebase consolidation. Only add error handling.

Per user decision: Use generic error message. Display inline below form, not as toast or banner.
  </action>
  <verify>
grep "const \[error, setError\]" components/SignUp.tsx confirms error state added
grep "setError.*Sign up failed" components/SignUp.tsx confirms error message set in catch
grep "text-red-600" components/SignUp.tsx confirms error display element exists
npm run build succeeds without TypeScript errors
  </verify>
  <done>SignUp component has error state, sets generic error message on auth failure, displays error inline below form, and clears error on retry</done>
</task>

</tasks>

<verification>
Run functional checks:
- `npm run build` succeeds
- `grep -r "console.log(error)" components/Sign*.tsx` returns no matches (replaced with console.error)
- Manual test: Attempt sign in with invalid credentials, see error message below form
- Manual test: Attempt sign up with existing email, see error message below form
- Manual test: Error clears when retry attempted
</verification>

<success_criteria>
- Both SignIn and SignUp components have error state
- Auth failures display generic, user-friendly error messages
- Error messages appear inline below forms with red text styling
- Errors clear automatically on retry attempt
- Console.error still logs detailed errors for debugging
</success_criteria>

<output>
After completion, create `.planning/phases/01-critical-security-quick-fixes/01-03-SUMMARY.md`
</output>
